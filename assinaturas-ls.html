<!DOCTYPE html>
<html lang="pt-PT">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Builder • Assinatura Landskill (Light)</title>
  <!--
    Builder leve, em light mode, que gera:
    1) Pré‑visualização fiel da assinatura (tabelas + inline styles, email-safe)
    2) Botões para copiar o HTML
    3) Link partilhável: abre esta mesma página em modo "assinatura" usando query params

    Como usar em GitHub Pages:
    - Faz upload deste ficheiro como builder-assinatura-landskill.html no teu repositório
    - Abre via GitHub Pages (HTTPS). Os links partilháveis usam a própria URL desta página

    Querystring suportada para modo assinatura (partilhável):
    ?view=signature&full_name=...&job_title=...&mobile_number=...&photo_url=...&website_url=...&instagram_url=...&linkedin_url=...
  -->
  <style>
    :root {
      --blue:#353ED4; --teal:#00C6B1; --tealLine:#1ED6C1; --ink:#0A0A0A; --muted:#5e6572; --bg:#f7f8fa; --card:#ffffff; --grid:#e8ebf0;
      --radius:14px;
    }
    html,body { height:100%; }
    body {
      margin:0; background:var(--bg); color:#0c1116; font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "lydia Sans", sans-serif;
    }
    .wrap { max-width:1100px; margin:24px auto; padding:0 16px; }
    .header { display:flex; align-items:center; justify-content:space-between; margin-bottom:16px; }
    .title { font-size:20px; font-weight:700; letter-spacing:.2px; }
    .grid { display:grid; grid-template-columns: 360px 1fr; gap:16px; }
    .card { background:var(--card); border:1px solid var(--grid); border-radius:var(--radius); box-shadow: 0 1px 2px rgba(0,0,0,.04); }
    .card h3 { margin:0 0 10px; font-size:14px; font-weight:700; letter-spacing:.2px; color:#111; }
    .card .body { padding:16px; }
    .form label { display:block; font-size:12px; color:#38404a; margin:10px 0 6px; }
    .form input[type="text"], .form input[type="url"], .form textarea {
      width:100%; padding:10px 12px; border:1px solid var(--grid); border-radius:10px; outline:none; background:#fff; font-size:14px;
    }
    .row { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    .btns { display:flex; gap:10px; flex-wrap:wrap; }
    button, .btn-link { appearance:none; border:1px solid var(--grid); background:#fff; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:600; }
    button.primary { background:var(--blue); border-color:var(--blue); color:#fff; }
    button.ghost { background:#fff; }
    .muted { color:var(--muted); font-size:12px; }
    .preview { padding:20px; display:flex; align-items:flex-start; justify-content:center; }
    .codeout { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:12px; background:#0f172a; color:#e5e7eb; border-radius:10px; padding:12px; overflow:auto; max-height:300px; }
    .tips { font-size:12px; color:#38404a; }
    .inline-help { margin-top:8px; }
    .disclaimer { font-size:12px; color:#556; margin-top:8px; }
  </style>
</head>
<body>
<div class="wrap" id="app">
  <div class="header">
    <div class="title">Builder – Assinatura Landskill (Light)</div>
    <div class="btns">
      <button class="ghost" id="btnLoadFromURL">Carregar dos parâmetros da URL</button>
      <button class="ghost" id="btnReset">Repor</button>
    </div>
  </div>

  <div class="grid" id="builderGrid">
    <div class="card">
      <div class="body form">
        <h3>Dados principais</h3>
        <label>Nome completo</label>
        <input id="full_name" type="text" value="Filipa Freire" />
        <label>Cargo</label>
        <input id="job_title" type="text" value="Graphic Designer" />

        <div class="row">
          <div>
            <label>Telemóvel (link tel:)</label>
            <input id="mobile_number" type="text" value="(+351) 934 556 060" />
          </div>
          <div>
            <label>Telefone fixo (link tel:)</label>
            <input id="landline_number" type="text" value="(+351) 214 139 860" />
          </div>
        </div>

        <label>Morada (sem link)</label>
        <input id="address" type="text" value="Rua do Proletariado N°7 (Lote 1) Carnaxide, Portugal" />

        <label>URL foto (recortada circular, retina 560×560)</label>
        <input id="photo_url" type="url" value="https://landskillassinaturas.github.io/ls-assinaturas/ls_headshot-filipa-freire.png" />

        <div class="row">
          <div>
            <label>Website URL</label>
            <input id="website_url" type="url" value="https://www.landskill.com" />
          </div>
          <div>
            <label>Instagram URL</label>
            <input id="instagram_url" type="url" value="https://www.instagram.com/landskill" />
          </div>
        </div>
        <label>LinkedIn URL</label>
        <input id="linkedin_url" type="url" value="https://www.linkedin.com/company/landskill" />

        <div class="inline-help tips">
          <p>Paleta: Azul <code>#353ED4</code> · Verde <code>#00C6B1</code> · Linha <code>#1ED6C1</code>. Fonte preferida “lydia Sans”.</p>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="body">
        <h3>Pré‑visualização</h3>
        <div class="preview" id="previewArea">
          <!-- A assinatura renderiza aqui -->
        </div>
        <div class="btns">
          <button class="primary" id="btnCopyHTML">Copiar HTML da assinatura</button>
          <button id="btnOpenShare">Abrir assinatura em nova aba (link partilhável)</button>
          <button id="btnCopyShare">Copiar link partilhável</button>
        </div>
        <div class="inline-help disclaimer">O HTML copiado usa apenas tabelas e estilos inline (compatível com Gmail/Outlook/Apple Mail). O link partilhável abre esta mesma página em modo "assinatura" com parâmetros na URL.</div>
      </div>
    </div>
  </div>

  <div class="card" style="margin-top:16px;">
    <div class="body">
      <h3>Ícones & Marca (URLs – podes trocar pelos do teu repositório)</h3>
      <div class="form">
        <div class="row">
          <div>
            <label>Logo LANDSKILL (retina ~360×80)</label>
            <input id="logo_url" type="url" value="https://landskillassinaturas.github.io/ls-assinaturas/ls_logo.png" />
          </div>
          <div>
            <label>Ícone Seta ↗ (retina ~112×112)</label>
            <input id="arrow_icon_url" type="url" value="https://landskillassinaturas.github.io/ls-assinaturas/ls_seta.png" />
          </div>
        </div>
        <div class="row">
          <div>
            <label>Ícone Telefone</label>
            <input id="phone_icon_url" type="url" value="https://landskillassinaturas.github.io/ls-assinaturas/ls_telemovel.png" />
          </div>
          <div>
            <label>Ícone Localização</label>
            <input id="location_icon_url" type="url" value="https://landskillassinaturas.github.io/ls-assinaturas/ls_local.png" />
          </div>
        </div>
        <div class="row">
          <div>
            <label>Ícone Website</label>
            <input id="globe_icon_url" type="url" value="https://landskillassinaturas.github.io/ls-assinaturas/ls_icon-website.png" />
          </div>
          <div>
            <label>Ícone Instagram</label>
            <input id="instagram_icon_url" type="url" value="https://landskillassinaturas.github.io/ls-assinaturas/ls_icon-instagram.png" />
          </div>
        </div>
        <label>Ícone LinkedIn</label>
        <input id="linkedin_icon_url" type="url" value="https://landskillassinaturas.github.io/ls-assinaturas/ls_icon-linkedin.png" />
        <label style="margin-top:10px;">Selo ISO (retina ~480×340)</label>
        <input id="iso_badge_url" type="url" value="https://landskillassinaturas.github.io/ls-assinaturas/ls_certificacao-iso.png" />
      </div>
    </div>
  </div>

  <div class="card" style="margin-top:16px;">
    <div class="body">
      <h3>HTML de saída (só leitura)</h3>
      <pre class="codeout" id="htmlOut"></pre>
    </div>
  </div>
</div>

<script>
(function(){
  const qs = (id)=>document.getElementById(id);
  const fields = [
    'full_name','job_title','mobile_number','landline_number','address','photo_url',
    'website_url','instagram_url','linkedin_url',
    'logo_url','arrow_icon_url','phone_icon_url','location_icon_url','globe_icon_url','instagram_icon_url','linkedin_icon_url','iso_badge_url'
  ];

  function getState(){
    const s = {};
    fields.forEach(k=>{ const el = qs(k); if(el) s[k]=el.value.trim(); });
    return s;
  }

  function telHref(num){
    // Extrai dígitos e +
    const clean = (num||'').replace(/[^+\d]/g,'');
    return 'tel:'+clean;
  }

  function escHtml(s){
    return (s||'').replace(/[&<>]/g, c=>({"&":"&amp;","<":"&lt;",">":"&gt;"}[c]));
  }

  function signatureHTML(s){
    // Tabela completa (email-safe). Mantém exatamente o layout especificado.
    const safe = {
      full_name: escHtml(s.full_name||''),
      job_title: escHtml(s.job_title||''),
      mobile_number: escHtml(s.mobile_number||''),
      landline_number: escHtml(s.landline_number||''),
      address: escHtml(s.address||''),
      photo_url: s.photo_url||'',
      website_url: s.website_url||'',
      instagram_url: s.instagram_url||'',
      linkedin_url: s.linkedin_url||'',
      logo_url: s.logo_url||'',
      arrow_icon_url: s.arrow_icon_url||'',
      phone_icon_url: s.phone_icon_url||'',
      location_icon_url: s.location_icon_url||'',
      globe_icon_url: s.globe_icon_url||'',
      instagram_icon_url: s.instagram_icon_url||'',
      linkedin_icon_url: s.linkedin_icon_url||'',
      iso_badge_url: s.iso_badge_url||''
    };

    const telMobile = telHref(s.mobile_number);
    const telLand = telHref(s.landline_number);

    return `
<!-- JSON PLACEHOLDERS (exemplo) -->
<!--
{
  "full_name": "${safe.full_name}",
  "job_title": "${safe.job_title}",
  "mobile_number": "${safe.mobile_number}",
  "photo_url": "${safe.photo_url}",
  "website_url": "${safe.website_url}",
  "instagram_url": "${safe.instagram_url}",
  "linkedin_url": "${safe.linkedin_url}",
  "logo_url": "${safe.logo_url}",
  "arrow_icon_url": "${safe.arrow_icon_url}",
  "phone_icon_url": "${safe.phone_icon_url}",
  "location_icon_url": "${safe.location_icon_url}",
  "globe_icon_url": "${safe.globe_icon_url}",
  "instagram_icon_url": "${safe.instagram_icon_url}",
  "linkedin_icon_url": "${safe.linkedin_icon_url}",
  "iso_badge_url": "${safe.iso_badge_url}"
}
-->
<!DOCTYPE html>
<html lang="pt-PT">
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="x-apple-disable-message-reformatting">
<title>Assinatura Landskill</title>
</head>
<body style="margin:0; padding:0; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; background:#ffffff;">
  <table role="presentation" cellpadding="0" cellspacing="0" border="0" width=\"780\" align="left" style="border-collapse:collapse; mso-table-lspace:0; mso-table-rspace:0; font-family:'lydia Sans', Arial, Helvetica, sans-serif;">
    <tr>
      <!-- COLUNA ESQUERDA (FOTO) -->
      <td width=\"260\" valign="top" style="padding:20px 10px 10px 0;">
        <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="300" style="border-collapse:collapse;">
          <tr>
            <td align="center" valign="top">
              <!-- PLACEHOLDER: photo_url -->
              <img src="${safe.photo_url}" alt="Foto de perfil" title="Foto de perfil" width=\"240\" height=\"240\" style="display:block; border:0; outline:none; text-decoration:none; border-radius:120px;">
            </td>
          </tr>
        </table>
      </td>

      <!-- COLUNA CENTRAL (NOME, CARGO, LINHA, CONTACTOS) -->
      <td width=\"360\" valign="top" style="padding:20px 20px 10px 10px;">
        <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="420" style="border-collapse:collapse;">
          <tr>
            <td valign="top" width="56" style="vertical-align:top;">
              <img src="${safe.arrow_icon_url}" alt="↗" title="Seta Landskill" width=\"48\" height=\"48\" style="display:block; border:0; outline:none; text-decoration:none;">
            </td>
            <td valign="top" style="padding-left:10px;">
              <!-- PLACEHOLDER: full_name -->
              <div style="font-family:'lydia Sans', Arial, Helvetica, sans-serif; font-size:40px; line-height:1.1; font-weight:700; color:#00C6B1; mso-line-height-rule:exactly;">${safe.full_name}</div>
              <!-- PLACEHOLDER: job_title -->
              <div style="font-family:'lydia Sans', Arial, Helvetica, sans-serif; font-size:26px; line-height:1.25; font-weight:600; color:#353ED4; mso-line-height-rule:exactly;">${safe.job_title}</div>

              <!-- Linha decorativa com gap -->
              <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="border-collapse:collapse; margin-top:8px;">
                <tr>
                  <td width="90" style="height:2px; line-height:2px; font-size:0;">&nbsp;</td>
                  <td style="background:#1ED6C1; height:2px; line-height:2px; font-size:0;">&nbsp;</td>
                </tr>
              </table>
            </td>
          </tr>

          <tr><td colspan="2" style="height:14px; line-height:14px; font-size:0;">&nbsp;</td></tr>

          <!-- Contactos -->
          <tr>
            <td colspan="2">
              <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="border-collapse:collapse;">
                <tr>
                  <td valign="middle" width="30" style="padding:2px 8px 2px 0;">
                    <img src="${safe.phone_icon_url}" alt="Telefone" title="Telefone" width="24" height="24" style="display:block; border:0;">
                  </td>
                  <td valign="middle" style="font-size:0;">
                    <span style="font-family:'lydia Sans', Arial, Helvetica, sans-serif; font-size:20px; color:#353ED4; font-weight:700;">T:</span>
                    <!-- PLACEHOLDER: mobile_number -->
                    <a href="${telMobile}" style="font-family:'lydia Sans', Arial, Helvetica, sans-serif; font-size:22px; color:#000000; font-weight:700; text-decoration:none;">${safe.mobile_number}</a>
                  </td>
                </tr>
                <tr>
                  <td valign="middle" width="30" style="padding:6px 8px 2px 0;">
                    <img src="${safe.phone_icon_url}" alt="Telefone fixo" title="Telefone fixo" width="24" height="24" style="display:block; border:0;">
                  </td>
                  <td valign="middle">
                    <a href="${telLand}" style="font-family:'lydia Sans', Arial, Helvetica, sans-serif; font-size:18px; color:#202020; font-weight:500; text-decoration:none;">${safe.landline_number}</a>
                  </td>
                </tr>
                <tr>
                  <td valign="top" width="30" style="padding:8px 8px 0 0;">
                    <img src="${safe.location_icon_url}" alt="Localização" title="Localização" width="24" height="24" style="display:block; border:0;">
                  </td>
                  <td valign="top" style="padding-top:8px;">
                    <span style="font-family:'lydia Sans', Arial, Helvetica, sans-serif; font-size:18px; color:#000000; font-weight:500;">${safe.address}</span>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
        </table>
      </td>

      <!-- COLUNA DIREITA (MARCA + ISO + SOCIAIS) -->
      <td width=\"160\" valign="top" style="padding:20px 0 10px 0;">
        <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="180" style="border-collapse:collapse;">
          <tr>
            
          <tr>
            <td align="right" style="padding:0 10px 8px 10px;">
              <img src="${safe.logo_url}" alt="LANDSKILL" title="LANDSKILL" width="180" height=\"36\" style="display:block; border:0;">
            </td>
          </tr>
          <tr><td style=\"height:16px; line-height:16px; font-size:0;\">&nbsp;<\/td><\/tr>
          <tr><td style=\"height:210px;\" valign=\"middle\" align=\"right\"><img src=\"${safe.iso_badge_url}\" alt=\"BSI ISO/IEC 27017\" title=\"BSI ISO/IEC 27017\" width=\"200\" height=\"140\" style=\"display:block; border:0;\"></td></tr>
          <tr>
            <td align="right" style="padding:6px 6px 0 6px;">
              <table role="presentation" cellpadding="0" cellspacing="0" border="0" style="border-collapse:collapse;">
                <tr>
                  <td style="padding-left:8px;">
                    <a href="${safe.website_url}" target="_blank" rel="noopener" title="Website">
                      <img src="${safe.globe_icon_url}" alt="Website" width=\"28\" height=\"28\" style="display:block; border:0;">
                    </a>
                  </td>
                  <td style="padding-left:12px;">
                    <a href="${safe.instagram_url}" target="_blank" rel="noopener" title="Instagram">
                      <img src="${safe.instagram_icon_url}" alt="Instagram" width=\"28\" height=\"28\" style="display:block; border:0;">
                    </a>
                  </td>
                  <td style="padding-left:12px;">
                    <a href="${safe.linkedin_url}" target="_blank" rel="noopener" title="LinkedIn">
                      <img src="${safe.linkedin_icon_url}" alt="LinkedIn" width=\"28\" height=\"28\" style="display:block; border:0;">
                    </a>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
        </table>
      </td>
    </tr>

    <!-- SEPARADOR HORIZONTAL FULL WIDTH -->
    <tr>\n  <td style=\"padding-top:8px;\" width=\"260\">&nbsp;<\/td>\n  <td style=\"padding-top:8px;\" width=\"360\">\n    <table role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" width=\"100%\" style=\"border-collapse:collapse;\">\n      <tr>\n        <td width=\"58\" style=\"height:2px; line-height:2px; font-size:0;\">&nbsp;<\/td>\n        <td style=\"height:2px; line-height:2px; font-size:0; background:#00C6B1;\">&nbsp;<\/td>\n      <\/tr>\n    <\/table>\n  <\/td>\n  <td style=\"padding-top:8px;\" width=\"160\">&nbsp;<\/td>\n<\/tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>`;
  }

  function render(){
    const s = getState();
    const html = signatureHTML(s);
    // Pré‑visualização
    qs('previewArea').innerHTML = html;
    qs('htmlOut').textContent = html;
  }

  // Partilhável: gera link com query params
  function buildShareURL(){
    const s = getState();
    const url = new URL(window.location.href);
    url.searchParams.set('view','signature');
    fields.forEach(k=>{ if(s[k]) url.searchParams.set(k, s[k]); });
    return url.toString();
  }

  function applyFromURL(){
    const url = new URL(window.location.href);
    fields.forEach(k=>{
      const v = url.searchParams.get(k);
      if(v!==null){ const el = qs(k); if(el) el.value = v; }
    });
  }

  function copyText(txt){
    navigator.clipboard.writeText(txt).then(()=>{
      toast('Copiado!');
    }).catch(()=>{
      alert('Copiar falhou – o teu navegador bloqueou.');
    });
  }

  function toast(msg){
    let t = document.createElement('div');
    t.textContent = msg;
    t.style.cssText = 'position:fixed;bottom:16px;right:16px;background:#111;color:#fff;padding:10px 12px;border-radius:10px;opacity:.95;z-index:9999';
    document.body.appendChild(t);
    setTimeout(()=>t.remove(),1600);
  }

  // Eventos
  fields.forEach(k=>{
    const el = qs(k); if(!el) return;
    el.addEventListener('input', render);
    el.addEventListener('change', render);
  });

  qs('btnCopyHTML').addEventListener('click', ()=>{
    copyText(qs('htmlOut').textContent);
  });

  qs('btnOpenShare').addEventListener('click', ()=>{
    const u = buildShareURL();
    window.open(u, '_blank');
  });

  qs('btnCopyShare').addEventListener('click', ()=>{
    copyText(buildShareURL());
  });

  qs('btnReset').addEventListener('click', ()=>{ window.location.href = window.location.pathname; });
  qs('btnLoadFromURL').addEventListener('click', ()=>{ applyFromURL(); render(); });

  // Se estivermos em modo assinatura (view=signature), mostrar só a assinatura
  function maybeSignatureOnly(){
    const url = new URL(window.location.href);
    if(url.searchParams.get('view')==='signature'){
      // Preenche campos e renderiza
      applyFromURL();
      const html = signatureHTML(getState());
      document.body.innerHTML = html; // substitui por assinatura apenas
      document.title = 'Assinatura Landskill';
    }
  }

  // Inicialização
  applyFromURL();
  render();
  maybeSignatureOnly();
})();
</script>
</body>
</html>
